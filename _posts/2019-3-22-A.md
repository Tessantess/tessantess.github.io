---
layout:     post
title:      差分隐私-三种加噪机制
subtitle:    
date:       2019-03-24
author:     Tintin
header-img: img/post-bg-coffee.jpeg
catalog: true
tags:
    - privacy
---

## 1. 三种分布

* **Gaussian高斯分布**:<br> 
$$X \sim N(\mu,\sigma) \quad E(X)=\mu \quad D(X)=\sigma$$

$$
f(x|\mu,\sigma) = \frac{1}{\sqrt{2\pi}\sigma}e^{-\frac{(x-\mu)^2}{\sigma^2}}
$$

![](http://5b0988e595225.cdn.sohucs.com/images/20170724/1038a80c62694dbdba65f3c80577a781.gif)
这里可以把概率看作是点到均值的距离，距离中心点越远概率越小，距离越近概率越大。这里用指数函数放大距离对概率的影响. 

$$
d = \frac{(x-\mu)^2}{\sigma^2}
$$

系数为$$\frac{1}{\sqrt{2\pi}\sigma}$$是因为：

$$
\int e^{-\frac{(x-\mu)^2}{\sigma^2}}dx = \sqrt{2\pi}\sigma
$$

* **Laplace拉普拉斯分布** <br>
$$X\sim L(\mu,\lambda)\quad E(X)=\mu \quad D(X)=2\lambda^2$$

$$
f(x|\mu,\lambda) = \frac{1}{2\lambda}e^{-\frac{|x-\mu|}{\lambda}} \\
d = \frac{|x-\mu|}{\lambda}
$$

![](https://github.com/Echo-Gaoguichun/DP-Learning/raw/master/Reading-Notes/Pictures/20190224_DP/2.png)


* **Exponential指数分布**
![](https://gss2.bdstatic.com/9fo3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D220/sign=4fc607b74710b912bbc1f1fcf3fcfcb5/aa64034f78f0f7362d140c0d0a55b319eac413d7.jpg)

$$d = \lambda x$$

![](https://gss3.bdstatic.com/7Po3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=b02ffa7a8182b90129a0cb6112e4c212/96dda144ad345982cd6434cf07f431adcaef8485.jpg)

## 2. 差分隐私
核心思想：对于差别只有一条记录的两个相邻数据集，查询它们获得相同值的概率非常接近。

$$
P[M(D)\in S] \leq e^\epsilon P[M(D')\in S] \\
\frac{P[M(D)=S]}{P[M(D')=S]} \leq e^{\epsilon}
$$  

对于两个只相差一个记录的相邻数据集$$D$$和数据集$$D'$$,查询算法$$M$$的输出结果$$S$$的概率应该非常接近。对于任意参数$$\epsilon >0$$,函数$$M$$满足$$\epsilon-differential \quad privacy$$
$$\epsilon$$接近于0，两个概率接近相等，保密程度高，噪声越大
$$\epsilon$$越大，数据越准确，保密程度低，噪声越小。

## 3. Laplace噪声下的$$\epsilon-$$差分隐私
拉普拉斯噪声主要对数值型输出进行加噪。

$$M(D) = q(D)+Y$$

$$Y \sim L(0,\lambda), \lambda=\frac{\Delta q}{\epsilon}$$,其中函数$$q$$表示原查询函数，$$\Delta q$$表示相邻数据集用原来查询函数输出的最大差值

$$
\Delta q = \max_{D,D'}||q(D)-q(D')||_1
$$

那么：

$$
\frac{P[M(D)=S]}{P[M(D')=S]} = \frac{\frac{\epsilon}{2\Delta f}e^{ \frac{\epsilon}{\Delta f}|f(D)|}}{ \frac{\epsilon}{2\Delta f}e^{ \frac{\epsilon}{\Delta f}|f(D')|}}=e^{\frac{\epsilon}{\Delta f}(|f(D)|-|f(D')|)} \leq e^{\epsilon} \\
|f(D)|-|f(D')| \leq \Delta f  
$$

$$
所以 \quad |f(D)|-|f(D')| \leq \max_{D,D'}|f(D)-f(D')|
$$

该式满足绝对值不等式，因此$$Laplace(\mu, \frac{\Delta f}{\epsilon})$$满足$$\epsilon-$$差分隐私。

## 4. Gaussian噪声下的$$(\epsilon,\delta)-$$差分隐私

$$
P[M(D)\in S] \leq e^\epsilon P[M(D')\in S]+\delta 
$$

$$
M(D) = q(D) + Y
$$

其中$$Y \sim N(0,\sigma^2 I_p),\sigma \geq \frac{\sqrt{2ln(1.25/ \delta)\Delta q}}{\epsilon} $$,对于随机梯度下降$$\sigma \geq c\frac{q \sqrt{T \ln(1/\delta)}}{\epsilon}$$,$$T$$为迭代次数。
## 5. 指数机制下的$$\epsilon-$$差分隐私
主要用于非数值输出的函数或添加数值噪声后无意义的函数。

$$M(D,q) = e^{\frac{\epsilon q(D,r)}{2\Delta q}}$$

其中分值函数$$q(D,r)$$为原函数查询结果对应上文的$$f(D)$$,它表示输入$$D$$对应输出$$r$$的概率，$$\Delta q$$对应$$\Delta f$$:

$$\Delta q = \max_{D,D'}||q(D,r)-q(D',r)||$$

那么这里指数机制对应的参数$$\lambda = \frac{\epsilon}{2\Delta q}$$,下面证明其是否满足$$\epsilon-DP$$

$$
\frac{P[M(D)=r]}{P[M(D')=r]} = e^{\frac{\epsilon}{2\Delta q}(q(D,r)-q(D',r))} \leq e^\epsilon 
$$

$$
q(D,r)-q(D',r) \leq 2 \max_{D,D'}||q(D,r)-q(D',r)||
$$

<font color='blue'>$$为什么\lambda不是\frac{\epsilon}{\Delta q}?$$</font> 